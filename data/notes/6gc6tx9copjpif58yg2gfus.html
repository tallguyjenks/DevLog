<h1 id="pysnmp"><a aria-hidden="true" class="anchor-heading icon-link" href="#pysnmp"></a>Pysnmp</h1>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">SNMP</span></div>
<a href="/DevLog/notes/98hkwm9szucx74somjvd5l1" class="portal-arrow">Go to text <span class="right-arrow">â†’</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p><code>S</code>imple <code>N</code>etwork <code>M</code>anagement <code>P</code>rotocol</p>
</div></div><p></p><p></p>
<ul>
<li><a href="https://www.yaklin.ca/2022/01/11/pysnmp-hlapi-overview.html">https://www.yaklin.ca/2022/01/11/pysnmp-hlapi-overview.html</a></li>
</ul>
<pre class="language-python"><code class="language-python"><span class="token keyword">from</span> pysnmp<span class="token punctuation">.</span>hlapi <span class="token keyword">import</span> SnmpEngine<span class="token punctuation">,</span> CommunityData<span class="token punctuation">,</span> UdpTransportTarget<span class="token punctuation">,</span>\
                         ContextData<span class="token punctuation">,</span> ObjectType<span class="token punctuation">,</span> ObjectIdentity<span class="token punctuation">,</span> getCmd

iterator <span class="token operator">=</span> getCmd<span class="token punctuation">(</span>
    SnmpEngine<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    CommunityData<span class="token punctuation">(</span><span class="token string">'rostring'</span><span class="token punctuation">,</span> mpModel<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    UdpTransportTarget<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'192.168.11.201'</span><span class="token punctuation">,</span> <span class="token number">161</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    ContextData<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    ObjectType<span class="token punctuation">(</span>ObjectIdentity<span class="token punctuation">(</span><span class="token string">'SNMPv2-MIB'</span><span class="token punctuation">,</span> <span class="token string">'sysName'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

errorIndication<span class="token punctuation">,</span> errorStatus<span class="token punctuation">,</span> errorIndex<span class="token punctuation">,</span> varBinds <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span>

<span class="token keyword">if</span> errorIndication<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>errorIndication<span class="token punctuation">)</span>
<span class="token keyword">elif</span> errorStatus<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{} at {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>errorStatus<span class="token punctuation">.</span>prettyPrint<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        errorIndex <span class="token keyword">and</span> varBinds<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>errorIndex<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">or</span> <span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> oid<span class="token punctuation">,</span> val <span class="token keyword">in</span> varBinds<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>oid<span class="token punctuation">.</span>prettyPrint<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span>val<span class="token punctuation">.</span>prettyPrint<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</code></pre>
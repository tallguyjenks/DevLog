{"pageProps":{"note":{"id":"wmi8enzjoiq6tolzsb7ap53","title":"Reduce Code and save Time with Default Column Values","desc":"","updated":1648161098523,"created":1646691219629,"custom":{},"fname":"s.q.tsql.tips-tricks.reduce-code-and-save-time-with-default-column-values","type":"note","vault":{"fsPath":"DevLog"},"contentHash":"7a4b2ed0454ed5286744fd43f4c3a718","links":[],"anchors":{},"children":[],"parent":"8zi5l8v14vld0duayretzxl","data":{}},"body":"<h1 id=\"reduce-code-and-save-time-with-default-column-values\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reduce-code-and-save-time-with-default-column-values\"></a>Reduce Code and save Time with Default Column Values</h1>\n<blockquote>\n<p>If you have a column that represents the datetime of when a record was loaded, there is no reason for you to write CURRENT_TIMESTAMP over and over when you insert data into that table.\nInstead, when you create the table, specify that columnâ€™s default value of GETDATE. You can do it programmatically or in the table designer.\nBelow is an example of a data warehouse staging table template containing a primary key and standard audit columns. As you can see, each audit column has been assigned a default value there by reducing your insert statement by six lines.\nConsidering you will be writing thousands of procs over your career, the time saved from not having to write six lines is significant.</p>\n<p>-- <a href=\"https://tutorials.massstreet.net/v/transact-sql/solutions-to-real-world-problems/lesson-51.-reduce-code-and-save-time-with-default-column-values\">https://tutorials.massstreet.net/v/transact-sql/solutions-to-real-world-problems/lesson-51.-reduce-code-and-save-time-with-default-column-values</a></p>\n</blockquote>\n<pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">USE</span> demo\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> YourSchemaName<span class=\"token punctuation\">.</span>YourStageTableName<span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">[</span>ETLKey<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>uniqueidentifier<span class=\"token punctuation\">]</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>UniqueDims<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">varbinary</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token number\">35</span><span class=\"token punctuation\">)</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>UniqueRows<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">varbinary</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>SourceSystem<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>nvarchar<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>Cleansed<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">bit</span><span class=\"token punctuation\">]</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>ErrorRecord<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">bit</span><span class=\"token punctuation\">]</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>ErrorReason<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>nvarchar<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>Processed<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">bit</span><span class=\"token punctuation\">]</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">[</span>RunDate<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">datetime</span><span class=\"token punctuation\">]</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token punctuation\">[</span>PK_YourStageTableName<span class=\"token punctuation\">]</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">CLUSTERED</span> \n<span class=\"token punctuation\">(</span>\n       <span class=\"token punctuation\">[</span>ETLKey<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ASC</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">WITH</span> <span class=\"token punctuation\">(</span>PAD_INDEX <span class=\"token operator\">=</span> <span class=\"token keyword\">OFF</span><span class=\"token punctuation\">,</span> STATISTICS_NORECOMPUTE <span class=\"token operator\">=</span> <span class=\"token keyword\">OFF</span><span class=\"token punctuation\">,</span> IGNORE_DUP_KEY <span class=\"token operator\">=</span> <span class=\"token keyword\">OFF</span><span class=\"token punctuation\">,</span> ALLOW_ROW_LOCKS <span class=\"token operator\">=</span> <span class=\"token keyword\">ON</span><span class=\"token punctuation\">,</span> ALLOW_PAGE_LOCKS <span class=\"token operator\">=</span> <span class=\"token keyword\">ON</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ON</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">PRIMARY</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">ON</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">PRIMARY</span><span class=\"token punctuation\">]</span>\n\nGO\n\n<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span>YourSchemaName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span>YourStageTableName<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ADD</span>  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token punctuation\">[</span>DF_YourStageTableName_ETLKey<span class=\"token punctuation\">]</span>  <span class=\"token keyword\">DEFAULT</span> <span class=\"token punctuation\">(</span>newid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token punctuation\">[</span>ETLKey<span class=\"token punctuation\">]</span>\nGO\n<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span>YourSchemaName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span>YourStageTableName<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ADD</span>  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token punctuation\">[</span>DF_YourStageTableName_SourceSystem<span class=\"token punctuation\">]</span>  <span class=\"token keyword\">DEFAULT</span> <span class=\"token punctuation\">(</span>N<span class=\"token string\">'Copia'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token punctuation\">[</span>SourceSystem<span class=\"token punctuation\">]</span>\nGO\n<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span>YourSchemaName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span>YourStageTableName<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ADD</span>  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token punctuation\">[</span>DF_YourStageTableName_Cleansed<span class=\"token punctuation\">]</span>  <span class=\"token keyword\">DEFAULT</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token punctuation\">[</span>Cleansed<span class=\"token punctuation\">]</span>\nGO\n<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span>YourSchemaName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span>YourStageTableName<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ADD</span>  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token punctuation\">[</span>DF_YourStageTableName_ErrorRecord<span class=\"token punctuation\">]</span>  <span class=\"token keyword\">DEFAULT</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token punctuation\">[</span>ErrorRecord<span class=\"token punctuation\">]</span>\nGO\n<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span>YourSchemaName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span>YourStageTableName<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ADD</span>  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token punctuation\">[</span>DF_YourStageTableName_Processed<span class=\"token punctuation\">]</span>  <span class=\"token keyword\">DEFAULT</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token punctuation\">[</span>Processed<span class=\"token punctuation\">]</span>\nGO\n<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span>YourSchemaName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span>YourStageTableName<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ADD</span>  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token punctuation\">[</span>DF_YourStageTableName_RunDate<span class=\"token punctuation\">]</span>  <span class=\"token keyword\">DEFAULT</span> <span class=\"token punctuation\">(</span>getdate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token punctuation\">[</span>RunDate<span class=\"token punctuation\">]</span>\nGO\n</code></pre>","noteIndex":{"id":"root","title":"root","desc":"","updated":1641013093667,"created":1595961348801,"stub":false,"custom":{"stub":false,"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"DevLog"},"contentHash":"b0b26527a2962dbb8bd5fb9a53ad702f","links":[],"anchors":{},"children":["rzqe5mjn3q2zfscw1roxr20","Bl9NeJmftBQJyJA3X4a6u","inm1S24v2GcN3Quf7gzDb","fmx7cfcdzale0ezna61yq5z","q6tr8q7gahfijix2ktlhcu3","yah6spesmpstech2ue2k3lq","6pxwlugphnw6vm4t8kn0j5p","i17wi8y2hgivywe08h6q6it","1st35wikvph2aew8aana21u","mijr0wvj3qz0mt9pv9xo1jv","qaf8v120h0ffvbowysjxw50","sh4851li2rsrhx47wwsirgv","fwqjigvqyfxiyl3pbpjvgdw","pxdvvln974xhe8w0alh0hoy","n6yddb1smrac5ll3l1y6wbd","g5dllyqoqkenoiz3opalzu6","kbwt8ucy0yh6bo8fl0kv9iw","beykavbe22agsufmm03hu0c","2uvuqa3c15o5r4j7sqadqvr","yr6gzhx0bhzyec6f52y66vf","4no90tcdswtuwmjm0bxnetx"],"parent":null,"data":{},"body":"\nThe hyperfixated rabbit hole diving knowledge base that is my brain looking at technology.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"sterkere","visibility":"private"},{"fsPath":"Norsk","visibility":"private"},{"fsPath":"DevLog"}],"journal":{"dailyDomain":"log","name":"daily","dateFormat":"yyyy.MM.dd","addBehavior":"childOfCurrent"},"scratch":{"name":"scratch","dateFormat":"yyyy.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"todoIntegration":true,"name":"task","dateFormat":"yyyy.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"wip","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.95.1","enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":false,"templateHierarchy":"template","enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"theme":"custom","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/DevLog","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://{GITHUB_USERNAME}.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["DevLog"]},"writeStubs":false,"seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"master","editViewMode":"tree"},"enablePrettyLinks":true,"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}
{"pageProps":{"note":{"id":"oz1x7o262tb987k26lzz0h0","title":"Data Warehouse Etl Framework","desc":"","updated":1657152500124,"created":1646680597557,"url":"https://docs.massstreet.net/v/data-warehouse-etl-framework/","custom":{"url":"https://docs.massstreet.net/v/data-warehouse-etl-framework/"},"fname":"r.(.2022.03.07.data-warehouse-etl-framework","type":"note","vault":{"fsPath":"DevLog"},"contentHash":"6f1d266185d2ca57dd1fe4c38f2e364f","links":[{"type":"wiki","from":{"fname":"r.(.2022.03.07.data-warehouse-etl-framework","id":"oz1x7o262tb987k26lzz0h0","vaultName":"DevLog"},"value":"s.df.yaml","alias":"s.df.yaml","position":{"start":{"line":12,"column":5,"offset":546},"end":{"line":12,"column":18,"offset":559},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"s.df.yaml"}},{"type":"wiki","from":{"fname":"r.(.2022.03.07.data-warehouse-etl-framework","id":"oz1x7o262tb987k26lzz0h0","vaultName":"DevLog"},"value":"terms.etl","alias":"terms.etl","position":{"start":{"line":12,"column":50,"offset":591},"end":{"line":12,"column":63,"offset":604},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"terms.etl"}}],"anchors":{"etl-developers-field-guide":{"type":"header","text":"ETL Developers Field Guide","value":"etl-developers-field-guide","line":15,"column":0,"depth":2},"python-software-engineering-considerations":{"type":"header","text":"Python Software Engineering Considerations","value":"python-software-engineering-considerations","line":17,"column":0,"depth":3},"edw-etl-overview":{"type":"header","text":"EDW ETL Overview","value":"edw-etl-overview","line":29,"column":0,"depth":3},"acquire":{"type":"header","text":"Acquire","value":"acquire","line":33,"column":0,"depth":4},"consolidate":{"type":"header","text":"Consolidate","value":"consolidate","line":37,"column":0,"depth":4},"integrate":{"type":"header","text":"Integrate","value":"integrate","line":41,"column":0,"depth":4},"deliver":{"type":"header","text":"Deliver","value":"deliver","line":45,"column":0,"depth":4},"etl-environment-databases":{"type":"header","text":"ETL Environment Databases","value":"etl-environment-databases","line":49,"column":0,"depth":3},"data-acquisition-paradigms":{"type":"header","text":"Data Acquisition Paradigms","value":"data-acquisition-paradigms","line":65,"column":0,"depth":3},"demand-pull":{"type":"header","text":"Demand Pull","value":"demand-pull","line":67,"column":0,"depth":4},"supply-push":{"type":"header","text":"Supply Push","value":"supply-push","line":75,"column":0,"depth":4},"the-common-model":{"type":"header","text":"The Common Model","value":"the-common-model","line":84,"column":0,"depth":3},"the-semantic-layer":{"type":"header","text":"The Semantic Layer","value":"the-semantic-layer","line":88,"column":0,"depth":3}},"children":[],"parent":"b4jvrd4o7vhi4ixuon9ygww","data":{}},"body":"<h1 id=\"data-warehouse-etl-framework\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#data-warehouse-etl-framework\"></a>Data Warehouse Etl Framework</h1>\n<!-- ACTIVE -->\n<blockquote>\n<p>My primary use case for indexed views is using them to mirror data warehouse tables. I do not allow anybody that is not a data engineer access to the original tables. Not even on a read only basis. I create the index views for reports analyst. These are people that know SQL, but have no need to see the audit columns used to run the database.</p>\n<p>-- <a href=\"https://tutorials.massstreet.net/v/transact-sql/advanced-topics/lesson-36.-indexed-views\">https://tutorials.massstreet.net/v/transact-sql/advanced-topics/lesson-36.-indexed-views</a></p>\n</blockquote>\n<h2 id=\"etl-developers-field-guide\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#etl-developers-field-guide\"></a>ETL Developers Field Guide</h2>\n<h3 id=\"python-software-engineering-considerations\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#python-software-engineering-considerations\"></a>Python Software Engineering Considerations</h3>\n<p>Use <a href=\"/DevLog/notes/vrla5vq98eivr4c47f1env9\">Yaml</a> configuration files for python <a href=\"/DevLog/notes/8yc59ajk05o7h4ewiw83gux\">Etl</a></p>\n<p><strong>Directory Permissions</strong></p>\n<p>You should use a Proxy to run Python just like you would SSIS. The Windows account that is being used for the credential has to be explicitly named in the folder permissions. For me, I was in dev and was confused because I was an administrator and administrator was named. It had to be my specific login.</p>\n<p><strong>Absolute File Paths</strong></p>\n<p>When executing from SQL Server Agent, your script actually executes at <code>C:\\WINDOWS\\system32</code>. That means you can't use <code>os.getcwd()</code> as the base of file paths. Instead, if you use absolute paths, everything works fine.</p>\n<h3 id=\"edw-etl-overview\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#edw-etl-overview\"></a>EDW ETL Overview</h3>\n<p><img src=\"/DevLog/assets/images/2022-07-06-16-39-18.png\" alt=\"EDW ETL Overview\"></p>\n<h4 id=\"acquire\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#acquire\"></a>Acquire</h4>\n<p>Each ETL process that pulls data into the system is entirely independent of any other process. Each dataset is pulled from its source system and placed in a staging table.</p>\n<h4 id=\"consolidate\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#consolidate\"></a>Consolidate</h4>\n<p>All data that is collected in staging tables is moved to common model tables together. The common model is a unified representation of all data across systems.</p>\n<h4 id=\"integrate\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#integrate\"></a>Integrate</h4>\n<p>Moving data from consolidate to integrate is accomplished in the same step as moving from acquire to consolidate. Integrate is where we move the data from the common model into the warehouse tables.</p>\n<h4 id=\"deliver\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#deliver\"></a>Deliver</h4>\n<p>At this time, there are no OLAP cubes in the data architecture. Data is delivered through various vectors. Most of those vectors pass through the warehouse. A few bypass the warehouse and go straight to de-normalized reporting tables.</p>\n<h3 id=\"etl-environment-databases\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#etl-environment-databases\"></a>ETL Environment Databases</h3>\n<ul>\n<li><code>EDW</code>: The Data Warehouse</li>\n<li><code>ODS</code>: Operational Data Store\n<ul>\n<li>This is where all ETL functions take place.</li>\n<li>It is where staging tables and the tables that support the common model live.</li>\n<li>The stored procedures that perform ETL live here as well as any views that support monitoring of the ETL processes.</li>\n<li>This database is not accessible to business users.</li>\n</ul>\n</li>\n<li><code>REPORTING</code>:\n<ul>\n<li>The database consists of de-normalized reporting tables and views that are built from tables in the data warehouse.</li>\n<li>This database allows rapid access to data without having to build complex reports.</li>\n<li>Every model in production, is represented here as a de-normalized view.</li>\n</ul>\n</li>\n<li><code>SSISManagement</code>:\n<ul>\n<li>SSISManagment is the database that holds the logging information from the execution of SSIS packages.</li>\n<li>This database is FAR more useful and user friendly than the execution information provided by SQL Server.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"data-acquisition-paradigms\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#data-acquisition-paradigms\"></a>Data Acquisition Paradigms</h3>\n<h4 id=\"demand-pull\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#demand-pull\"></a>Demand Pull</h4>\n<ul>\n<li>trigged by the data warehouse environment.</li>\n<li>The grand majority of your processes should be demand pull.</li>\n<li>Demand pull is when the system reaches out to other systems on a schedule defined by whatever is stet in your specific orchestration tool.</li>\n<li>The key element being that the data warehouse box has access to the remote system.</li>\n<li>For example, a database to database pull that is executed via a linked server.</li>\n</ul>\n<h4 id=\"supply-push\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#supply-push\"></a>Supply Push</h4>\n<ul>\n<li>Supply push processes are initiated by processes external to the data warehouse.</li>\n<li>The general scenario here is data is usually dropped by a 3rd party into a folder that sits on an edge server.</li>\n<li>That folder is then scanned by data warehouse processes and moved into the <code>InterfacesAndExtracts</code> folder.</li>\n<li>Supply push processes should be rare and only done when there are no other options.</li>\n<li>A good example are bank feeds like bank reconciliation files.</li>\n<li>Those are published are published by the bank and the data warehouse does not have the ability to pull the data from the source system.</li>\n</ul>\n<h3 id=\"the-common-model\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-common-model\"></a>The Common Model</h3>\n<blockquote>\n<p>The common model represents the unified data model for the enterprise. The common model is necessary to process master data.</p>\n</blockquote>\n<h3 id=\"the-semantic-layer\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-semantic-layer\"></a>The Semantic Layer</h3>","noteIndex":{"id":"root","title":"root","desc":"","updated":1641013093667,"created":1595961348801,"stub":false,"custom":{"stub":false,"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"DevLog"},"contentHash":"b0b26527a2962dbb8bd5fb9a53ad702f","links":[],"anchors":{},"children":["rzqe5mjn3q2zfscw1roxr20","Bl9NeJmftBQJyJA3X4a6u","inm1S24v2GcN3Quf7gzDb","fmx7cfcdzale0ezna61yq5z","q6tr8q7gahfijix2ktlhcu3","yah6spesmpstech2ue2k3lq","6pxwlugphnw6vm4t8kn0j5p","i17wi8y2hgivywe08h6q6it","1st35wikvph2aew8aana21u","mijr0wvj3qz0mt9pv9xo1jv","qaf8v120h0ffvbowysjxw50","sh4851li2rsrhx47wwsirgv","fwqjigvqyfxiyl3pbpjvgdw","pxdvvln974xhe8w0alh0hoy","n6yddb1smrac5ll3l1y6wbd","g5dllyqoqkenoiz3opalzu6","kbwt8ucy0yh6bo8fl0kv9iw","beykavbe22agsufmm03hu0c","2uvuqa3c15o5r4j7sqadqvr","yr6gzhx0bhzyec6f52y66vf","4no90tcdswtuwmjm0bxnetx"],"parent":null,"data":{},"body":"\nThe hyperfixated rabbit hole diving knowledge base that is my brain looking at technology.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"sterkere","visibility":"private"},{"fsPath":"Norsk","visibility":"private"},{"fsPath":"DevLog"}],"journal":{"dailyDomain":"log","name":"daily","dateFormat":"yyyy.MM.dd","addBehavior":"childOfCurrent"},"scratch":{"name":"scratch","dateFormat":"yyyy.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"todoIntegration":true,"name":"task","dateFormat":"yyyy.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"wip","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.95.1","enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":false,"templateHierarchy":"template","enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"theme":"custom","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/DevLog","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://{GITHUB_USERNAME}.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["DevLog"]},"writeStubs":false,"seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"master","editViewMode":"tree"},"enablePrettyLinks":true,"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}
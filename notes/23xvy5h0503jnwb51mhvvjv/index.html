<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Configuration</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Configuration"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://{GITHUB_USERNAME}.github.io/DevLog/notes/23xvy5h0503jnwb51mhvvjv/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="3/8/2022"/><meta property="article:modified_time" content="5/9/2022"/><link rel="canonical" href="https://{GITHUB_USERNAME}.github.io/DevLog/notes/23xvy5h0503jnwb51mhvvjv/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/DevLog/_next/static/css/477fdc912058141b.css" as="style"/><link rel="stylesheet" href="/DevLog/_next/static/css/477fdc912058141b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/DevLog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/DevLog/_next/static/chunks/webpack-193abd745db5a977.js" defer=""></script><script src="/DevLog/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/DevLog/_next/static/chunks/main-e26c16bc784f9179.js" defer=""></script><script src="/DevLog/_next/static/chunks/pages/_app-fbacaa7678b5d585.js" defer=""></script><script src="/DevLog/_next/static/chunks/78-13ae6acd5ce7ca5b.js" defer=""></script><script src="/DevLog/_next/static/chunks/373-2f3879190a46a3d9.js" defer=""></script><script src="/DevLog/_next/static/chunks/pages/notes/%5Bid%5D-69449972c2a725d8.js" defer=""></script><script src="/DevLog/_next/static/1h5ulSjjsPnt_rJPFXOd4/_buildManifest.js" defer=""></script><script src="/DevLog/_next/static/1h5ulSjjsPnt_rJPFXOd4/_ssgManifest.js" defer=""></script><script src="/DevLog/_next/static/1h5ulSjjsPnt_rJPFXOd4/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="configuration"><a aria-hidden="true" class="anchor-heading icon-link" href="#configuration"></a>Configuration</h1>
<h2 id="link-aggregation"><a aria-hidden="true" class="anchor-heading icon-link" href="#link-aggregation"></a>Link Aggregation</h2>
<p><a href="/DevLog/notes/fwjx7xn19e8qrsl25esxsxl">Link Aggregation</a> / <a href="/DevLog/notes/lgl3co3ibveuv4ejvn2yso6">LACP</a></p>
<p>in the console follow the prompts to add all current interfaces to a <code>lagg</code> using <a href="/DevLog/notes/lgl3co3ibveuv4ejvn2yso6">LACP</a>, Then configure the aggregation for <a href="/DevLog/notes/qbu54lobmtwan4ce77nlwni">Dhcp</a></p>
<p>Now the web console should be available at a listed IP Address</p>
<h2 id="configure-smart-tests"><a aria-hidden="true" class="anchor-heading icon-link" href="#configure-smart-tests"></a>Configure SMART Tests</h2>
<ul>
<li><code>Tasks > S.M.A.R.T Test > Add</code></li>
</ul>
<pre class="language-txt"><code class="language-txt">All Disks
Type: LONG
Description: Long SMART test
Schedule: Monthly (0 0 1 * *) on the first day of the month at 00:00 (12:00 AM)
SAVE
</code></pre>
<h2 id="hardening"><a aria-hidden="true" class="anchor-heading icon-link" href="#hardening"></a>Hardening</h2>
<ul>
<li><a href="https://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-smart-tests">https://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-smart-tests</a></li>
</ul>
<ol>
<li>Use Fixed IP Address not DHCP</li>
<li>Disable Service Announcement
<ul>
<li>NetBIOS-NS</li>
<li>mDNS</li>
<li>WS-Discovery</li>
</ul>
</li>
<li>use well known DNS servers
<ul>
<li><code>1.1.1.1</code></li>
<li><code>8.8.8.8</code></li>
</ul>
</li>
<li>Keep 1 interface for management layer and 3 interfaces in <a href="/DevLog/notes/lgl3co3ibveuv4ejvn2yso6">LACP</a> for data</li>
<li><code>System > General > web interface address</code>
<ul>
<li>use <a href="/DevLog/notes/5rx5t4vplx50p3u31dpbqnr">HTTPS</a> redirect</li>
</ul>
</li>
<li>make <a href="/DevLog/notes/sy0ripvrs9z5vlf7lsdgj4l">SSH</a> NOT start automatically.
<ul>
<li>And in the advanced settings <code>ssh > pencil icon > advanced > auxillary parameters</code>
<ul>
<li>add <code>AllowUsers root@#.#.#.#</code> where <code>#.#.#.#</code> is the IP Address of the computer you want to be able to <a href="/DevLog/notes/sy0ripvrs9z5vlf7lsdgj4l">SSH</a> from</li>
</ul>
</li>
</ul>
</li>
<li>Give root an email for those important notifications (destination)
<ul>
<li>configure the notifications: <code>system > email</code></li>
<li>use the gmail OAuth and my service account email</li>
</ul>
</li>
<li>Periodic snapshots: <code>tasks > periodic snapshots</code>
<ul>
<li><a href="https://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-zfs-periodic-snapshots">https://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-zfs-periodic-snapshots</a>
<ul>
<li>hourly, daily, and weekly</li>
</ul>
</li>
</ul>
</li>
<li>Configure <a href="/DevLog/notes/sy0ripvrs9z5vlf7lsdgj4l">SSH</a> rules</li>
</ol>
<h2 id="configure-users-and-groups-for-shared-volumes"><a aria-hidden="true" class="anchor-heading icon-link" href="#configure-users-and-groups-for-shared-volumes"></a>Configure Users and groups for shared volumes</h2>
<ul>
<li>
<p><a href="https://www.truenas.com/community/threads/how-to-set-up-truenas-from-beginning-to-end-including-secure-remote-access-to-files-and-web-gui.89229/">https://www.truenas.com/community/threads/how-to-set-up-truenas-from-beginning-to-end-including-secure-remote-access-to-files-and-web-gui.89229/</a></p>
</li>
<li>
<p>To create shared volumes you can access through connection to your local network, see the following instructions.</p>
<ul>
<li>Go to accounts on the left panel.
<ul>
<li>Click on groups.</li>
<li>Click add.</li>
<li>Enter a group name (you can leave the GID as it is).</li>
<li>Enable permit sudo and samba authentication.</li>
<li>Submit.</li>
<li>Go to accounts on the left panel.</li>
<li>Click on users.</li>
<li>Click add.</li>
<li>Fill in all the empty field under Identification</li>
<li>Uncheck new primary group.</li>
<li>Choose the group you made previously from the drop down menu in primary groups.</li>
<li>Go ahead and check all of the boxes under Home Directory Permissions.</li>
<li>Under Authentication check permit sudo and Samba authentication.</li>
<li>Submit.</li>
<li>Go to Storage -> Pools</li>
<li>Click add.
<ul>
<li>Select create new pool then click create pool.</li>
</ul>
</li>
<li>Go back to Storage -> Pools</li>
<li>You should see the name of your new pool pop up.</li>
<li>Click on the three dots on the right side of that name.
<ul>
<li>Click add Zvol (this must be done!)</li>
<li>Put in a name and select a size for the Zvol (for a 1TB drive I used 1 GB, this is block device mainly used for VMs, so you can use less if you don't plan on using VMs on your NAS, more if you do).</li>
<li>Click submit.</li>
</ul>
</li>
<li>Click on the three dots on the right side of the pool once again.
<ul>
<li>Click add dataset.</li>
<li>Type in a name and click submit.</li>
</ul>
</li>
<li>Now you should be able to see the name of that dataset underneath your pool in Storage -> Pools</li>
<li>Click on the three dots on the right side of the name of the dataset.
<ul>
<li>Click on permissions.</li>
<li>Set the user under owner to www and group to www.</li>
<li>Click apply user and apply group.</li>
<li>Under access mode, check all of the boxes.</li>
<li>Click apply permissions recursively under advanced.</li>
<li>Click save.</li>
</ul>
</li>
<li>Click on the three dots on the right side of the name of the dataset.
<ul>
<li>Click on permissions.</li>
<li>Click on ACL manager.</li>
<li>Click on the preset open under the dropdown menu.</li>
<li>Set the user under owner to www and group to www.</li>
<li>Click apply user and apply group.</li>
<li>Click apply permissions recursively under advanced.</li>
<li>Click save</li>
</ul>
</li>
<li>Go to Services
<ul>
<li>Enable SMB and click on start automatically.</li>
</ul>
</li>
<li>Go to Sharing -> Windows Shares (SMB)
<ul>
<li>Click add.
<ul>
<li>Select the path to your dataset.</li>
<li>Click submit.</li>
</ul>
</li>
</ul>
</li>
<li>Now to access this folder from your Windows machine on your local network.
<ul>
<li>Go to file explorer -> network</li>
<li>Click on the top field and enter the IP address of your TrueNAS machine in this fashion (should be the same as the IP address you used to connect to your WebGUI)
<ul>
<li><code>\\youripaddress</code></li>
</ul>
</li>
<li>When it asks for username and password, use the username of the new account you created in the WebGUI and its password.</li>
<li>If you see your folder, great! If not, refer back to the previous steps to see if you did anything wrong.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="snapshots"><a aria-hidden="true" class="anchor-heading icon-link" href="#snapshots"></a>snapshots</h2>
<p>Snapshots only store the differential of the change so if data is 100GB and i add 1GB the snapshot is only 1GB</p>
<h2 id="setup-iperf3-on-the-server"><a aria-hidden="true" class="anchor-heading icon-link" href="#setup-iperf3-on-the-server"></a>Setup iperf3 on the server</h2>
<pre class="language-bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> iperf3
</code></pre>
<p>In the <code>~/.profile</code> file, add this line:</p>
<pre class="language-bash"><code class="language-bash">iperf3 -s <span class="token operator">&#x26;</span>
</code></pre>
<p>this will make it so upon server startup iperf3 will be run as an independant process that can can gather data from.</p>
<p>By default it listens on port <a href="/DevLog/notes/wk5g6n5tw8vwawhgm2laj88">5021</a></p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/DevLog/notes/2sgfr1r4i6jbwoma8b84913">TrueNAS (DevLog)</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#link-aggregation" title="Link Aggregation">Link Aggregation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#configure-smart-tests" title="Configure SMART Tests">Configure SMART Tests</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#hardening" title="Hardening">Hardening</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#configure-users-and-groups-for-shared-volumes" title="Configure Users and groups for shared volumes">Configure Users and groups for shared volumes</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#snapshots" title="snapshots">snapshots</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#setup-iperf3-on-the-server" title="Setup iperf3 on the server">Setup iperf3 on the server</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"23xvy5h0503jnwb51mhvvjv","title":"Configuration","desc":"","updated":1652072654653,"created":1646726626690,"custom":{},"fname":"p.doing.homelab.services.truenas.configuration","type":"note","vault":{"fsPath":"DevLog"},"contentHash":"f2aea1a85366b80c33bc0d5aa5c4220e","links":[{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.link-aggregation","alias":"n.link-aggregation","position":{"start":{"line":4,"column":1,"offset":22},"end":{"line":4,"column":23,"offset":44},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.link-aggregation"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.lacp","alias":"n.protocol.lacp","position":{"start":{"line":4,"column":26,"offset":47},"end":{"line":4,"column":45,"offset":66},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.lacp"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.lacp","alias":"n.protocol.lacp","position":{"start":{"line":6,"column":83,"offset":150},"end":{"line":6,"column":102,"offset":169},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.lacp"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.dhcp","alias":"n.protocol.dhcp","position":{"start":{"line":6,"column":139,"offset":206},"end":{"line":6,"column":158,"offset":225},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.dhcp"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.lacp","alias":"n.protocol.lacp","position":{"start":{"line":34,"column":62,"offset":862},"end":{"line":34,"column":81,"offset":881},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.lacp"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.https","alias":"n.protocol.https","position":{"start":{"line":36,"column":10,"offset":946},"end":{"line":36,"column":30,"offset":966},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.https"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.ssh","alias":"n.protocol.ssh","position":{"start":{"line":37,"column":9,"offset":984},"end":{"line":37,"column":27,"offset":1002},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.ssh"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.ssh","alias":"n.protocol.ssh","position":{"start":{"line":39,"column":111,"offset":1226},"end":{"line":39,"column":129,"offset":1244},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.ssh"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.protocol.ssh","alias":"n.protocol.ssh","position":{"start":{"line":46,"column":14,"offset":1656},"end":{"line":46,"column":32,"offset":1674},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.protocol.ssh"}},{"type":"wiki","from":{"fname":"p.doing.homelab.services.truenas.configuration","id":"23xvy5h0503jnwb51mhvvjv","vaultName":"DevLog"},"value":"n.port.5021","alias":"n.port.5021","position":{"start":{"line":127,"column":31,"offset":5263},"end":{"line":127,"column":46,"offset":5278},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"n.port.5021"}},{"from":{"fname":"p.doing.homelab.services.truenas","vaultName":"DevLog"},"type":"backlink","position":{"start":{"line":16,"column":10,"offset":492},"end":{"line":16,"column":60,"offset":542},"indent":[]},"value":"p.doing.homelab.services.truenas.configuration","alias":"p.doing.homelab.services.truenas.configuration"}],"anchors":{"link-aggregation":{"type":"header","text":"Link Aggregation","value":"link-aggregation","line":8,"column":0,"depth":2},"configure-smart-tests":{"type":"header","text":"Configure SMART Tests","value":"configure-smart-tests","line":16,"column":0,"depth":2},"hardening":{"type":"header","text":"Hardening","value":"hardening","line":28,"column":0,"depth":2},"configure-users-and-groups-for-shared-volumes":{"type":"header","text":"Configure Users and groups for shared volumes","value":"configure-users-and-groups-for-shared-volumes","line":54,"column":0,"depth":2},"snapshots":{"type":"header","text":"snapshots","value":"snapshots","line":115,"column":0,"depth":2},"setup-iperf3-on-the-server":{"type":"header","text":"Setup iperf3 on the server","value":"setup-iperf3-on-the-server","line":119,"column":0,"depth":2}},"children":[],"parent":"2sgfr1r4i6jbwoma8b84913","data":{}},"body":"\u003ch1 id=\"configuration\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#configuration\"\u003e\u003c/a\u003eConfiguration\u003c/h1\u003e\n\u003ch2 id=\"link-aggregation\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#link-aggregation\"\u003e\u003c/a\u003eLink Aggregation\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"/DevLog/notes/fwjx7xn19e8qrsl25esxsxl\"\u003eLink Aggregation\u003c/a\u003e / \u003ca href=\"/DevLog/notes/lgl3co3ibveuv4ejvn2yso6\"\u003eLACP\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ein the console follow the prompts to add all current interfaces to a \u003ccode\u003elagg\u003c/code\u003e using \u003ca href=\"/DevLog/notes/lgl3co3ibveuv4ejvn2yso6\"\u003eLACP\u003c/a\u003e, Then configure the aggregation for \u003ca href=\"/DevLog/notes/qbu54lobmtwan4ce77nlwni\"\u003eDhcp\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eNow the web console should be available at a listed IP Address\u003c/p\u003e\n\u003ch2 id=\"configure-smart-tests\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#configure-smart-tests\"\u003e\u003c/a\u003eConfigure SMART Tests\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eTasks \u003e S.M.A.R.T Test \u003e Add\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-txt\"\u003e\u003ccode class=\"language-txt\"\u003eAll Disks\nType: LONG\nDescription: Long SMART test\nSchedule: Monthly (0 0 1 * *) on the first day of the month at 00:00 (12:00 AM)\nSAVE\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"hardening\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#hardening\"\u003e\u003c/a\u003eHardening\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-smart-tests\"\u003ehttps://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-smart-tests\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003eUse Fixed IP Address not DHCP\u003c/li\u003e\n\u003cli\u003eDisable Service Announcement\n\u003cul\u003e\n\u003cli\u003eNetBIOS-NS\u003c/li\u003e\n\u003cli\u003emDNS\u003c/li\u003e\n\u003cli\u003eWS-Discovery\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003euse well known DNS servers\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e1.1.1.1\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e8.8.8.8\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eKeep 1 interface for management layer and 3 interfaces in \u003ca href=\"/DevLog/notes/lgl3co3ibveuv4ejvn2yso6\"\u003eLACP\u003c/a\u003e for data\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSystem \u003e General \u003e web interface address\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003euse \u003ca href=\"/DevLog/notes/5rx5t4vplx50p3u31dpbqnr\"\u003eHTTPS\u003c/a\u003e redirect\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003emake \u003ca href=\"/DevLog/notes/sy0ripvrs9z5vlf7lsdgj4l\"\u003eSSH\u003c/a\u003e NOT start automatically.\n\u003cul\u003e\n\u003cli\u003eAnd in the advanced settings \u003ccode\u003essh \u003e pencil icon \u003e advanced \u003e auxillary parameters\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003eadd \u003ccode\u003eAllowUsers root@#.#.#.#\u003c/code\u003e where \u003ccode\u003e#.#.#.#\u003c/code\u003e is the IP Address of the computer you want to be able to \u003ca href=\"/DevLog/notes/sy0ripvrs9z5vlf7lsdgj4l\"\u003eSSH\u003c/a\u003e from\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGive root an email for those important notifications (destination)\n\u003cul\u003e\n\u003cli\u003econfigure the notifications: \u003ccode\u003esystem \u003e email\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003euse the gmail OAuth and my service account email\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePeriodic snapshots: \u003ccode\u003etasks \u003e periodic snapshots\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-zfs-periodic-snapshots\"\u003ehttps://www.truenas.com/docs/scale/communityrecommends/hardened-backup-repository-for-veeam/#configure-zfs-periodic-snapshots\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003ehourly, daily, and weekly\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eConfigure \u003ca href=\"/DevLog/notes/sy0ripvrs9z5vlf7lsdgj4l\"\u003eSSH\u003c/a\u003e rules\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"configure-users-and-groups-for-shared-volumes\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#configure-users-and-groups-for-shared-volumes\"\u003e\u003c/a\u003eConfigure Users and groups for shared volumes\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://www.truenas.com/community/threads/how-to-set-up-truenas-from-beginning-to-end-including-secure-remote-access-to-files-and-web-gui.89229/\"\u003ehttps://www.truenas.com/community/threads/how-to-set-up-truenas-from-beginning-to-end-including-secure-remote-access-to-files-and-web-gui.89229/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTo create shared volumes you can access through connection to your local network, see the following instructions.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGo to accounts on the left panel.\n\u003cul\u003e\n\u003cli\u003eClick on groups.\u003c/li\u003e\n\u003cli\u003eClick add.\u003c/li\u003e\n\u003cli\u003eEnter a group name (you can leave the GID as it is).\u003c/li\u003e\n\u003cli\u003eEnable permit sudo and samba authentication.\u003c/li\u003e\n\u003cli\u003eSubmit.\u003c/li\u003e\n\u003cli\u003eGo to accounts on the left panel.\u003c/li\u003e\n\u003cli\u003eClick on users.\u003c/li\u003e\n\u003cli\u003eClick add.\u003c/li\u003e\n\u003cli\u003eFill in all the empty field under Identification\u003c/li\u003e\n\u003cli\u003eUncheck new primary group.\u003c/li\u003e\n\u003cli\u003eChoose the group you made previously from the drop down menu in primary groups.\u003c/li\u003e\n\u003cli\u003eGo ahead and check all of the boxes under Home Directory Permissions.\u003c/li\u003e\n\u003cli\u003eUnder Authentication check permit sudo and Samba authentication.\u003c/li\u003e\n\u003cli\u003eSubmit.\u003c/li\u003e\n\u003cli\u003eGo to Storage -\u003e Pools\u003c/li\u003e\n\u003cli\u003eClick add.\n\u003cul\u003e\n\u003cli\u003eSelect create new pool then click create pool.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGo back to Storage -\u003e Pools\u003c/li\u003e\n\u003cli\u003eYou should see the name of your new pool pop up.\u003c/li\u003e\n\u003cli\u003eClick on the three dots on the right side of that name.\n\u003cul\u003e\n\u003cli\u003eClick add Zvol (this must be done!)\u003c/li\u003e\n\u003cli\u003ePut in a name and select a size for the Zvol (for a 1TB drive I used 1 GB, this is block device mainly used for VMs, so you can use less if you don't plan on using VMs on your NAS, more if you do).\u003c/li\u003e\n\u003cli\u003eClick submit.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eClick on the three dots on the right side of the pool once again.\n\u003cul\u003e\n\u003cli\u003eClick add dataset.\u003c/li\u003e\n\u003cli\u003eType in a name and click submit.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eNow you should be able to see the name of that dataset underneath your pool in Storage -\u003e Pools\u003c/li\u003e\n\u003cli\u003eClick on the three dots on the right side of the name of the dataset.\n\u003cul\u003e\n\u003cli\u003eClick on permissions.\u003c/li\u003e\n\u003cli\u003eSet the user under owner to www and group to www.\u003c/li\u003e\n\u003cli\u003eClick apply user and apply group.\u003c/li\u003e\n\u003cli\u003eUnder access mode, check all of the boxes.\u003c/li\u003e\n\u003cli\u003eClick apply permissions recursively under advanced.\u003c/li\u003e\n\u003cli\u003eClick save.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eClick on the three dots on the right side of the name of the dataset.\n\u003cul\u003e\n\u003cli\u003eClick on permissions.\u003c/li\u003e\n\u003cli\u003eClick on ACL manager.\u003c/li\u003e\n\u003cli\u003eClick on the preset open under the dropdown menu.\u003c/li\u003e\n\u003cli\u003eSet the user under owner to www and group to www.\u003c/li\u003e\n\u003cli\u003eClick apply user and apply group.\u003c/li\u003e\n\u003cli\u003eClick apply permissions recursively under advanced.\u003c/li\u003e\n\u003cli\u003eClick save\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGo to Services\n\u003cul\u003e\n\u003cli\u003eEnable SMB and click on start automatically.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGo to Sharing -\u003e Windows Shares (SMB)\n\u003cul\u003e\n\u003cli\u003eClick add.\n\u003cul\u003e\n\u003cli\u003eSelect the path to your dataset.\u003c/li\u003e\n\u003cli\u003eClick submit.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eNow to access this folder from your Windows machine on your local network.\n\u003cul\u003e\n\u003cli\u003eGo to file explorer -\u003e network\u003c/li\u003e\n\u003cli\u003eClick on the top field and enter the IP address of your TrueNAS machine in this fashion (should be the same as the IP address you used to connect to your WebGUI)\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e\\\\youripaddress\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eWhen it asks for username and password, use the username of the new account you created in the WebGUI and its password.\u003c/li\u003e\n\u003cli\u003eIf you see your folder, great! If not, refer back to the previous steps to see if you did anything wrong.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"snapshots\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#snapshots\"\u003e\u003c/a\u003esnapshots\u003c/h2\u003e\n\u003cp\u003eSnapshots only store the differential of the change so if data is 100GB and i add 1GB the snapshot is only 1GB\u003c/p\u003e\n\u003ch2 id=\"setup-iperf3-on-the-server\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#setup-iperf3-on-the-server\"\u003e\u003c/a\u003eSetup iperf3 on the server\u003c/h2\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003eapt-get\u003c/span\u003e \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e iperf3\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the \u003ccode\u003e~/.profile\u003c/code\u003e file, add this line:\u003c/p\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003eiperf3 -s \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ethis will make it so upon server startup iperf3 will be run as an independant process that can can gather data from.\u003c/p\u003e\n\u003cp\u003eBy default it listens on port \u003ca href=\"/DevLog/notes/wk5g6n5tw8vwawhgm2laj88\"\u003e5021\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/DevLog/notes/2sgfr1r4i6jbwoma8b84913\"\u003eTrueNAS (DevLog)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"root","title":"root","desc":"","updated":1641013093667,"created":1595961348801,"stub":false,"custom":{"stub":false,"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"DevLog"},"contentHash":"b0b26527a2962dbb8bd5fb9a53ad702f","links":[],"anchors":{},"children":["rzqe5mjn3q2zfscw1roxr20","Bl9NeJmftBQJyJA3X4a6u","inm1S24v2GcN3Quf7gzDb","fmx7cfcdzale0ezna61yq5z","q6tr8q7gahfijix2ktlhcu3","yah6spesmpstech2ue2k3lq","6pxwlugphnw6vm4t8kn0j5p","i17wi8y2hgivywe08h6q6it","1st35wikvph2aew8aana21u","mijr0wvj3qz0mt9pv9xo1jv","qaf8v120h0ffvbowysjxw50","sh4851li2rsrhx47wwsirgv","fwqjigvqyfxiyl3pbpjvgdw","pxdvvln974xhe8w0alh0hoy","n6yddb1smrac5ll3l1y6wbd","g5dllyqoqkenoiz3opalzu6","kbwt8ucy0yh6bo8fl0kv9iw","beykavbe22agsufmm03hu0c","2uvuqa3c15o5r4j7sqadqvr","yr6gzhx0bhzyec6f52y66vf","4no90tcdswtuwmjm0bxnetx"],"parent":null,"data":{},"body":"\nThe hyperfixated rabbit hole diving knowledge base that is my brain looking at technology.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"sterkere","visibility":"private"},{"fsPath":"Norsk","visibility":"private"},{"fsPath":"DevLog"}],"journal":{"dailyDomain":"log","name":"daily","dateFormat":"yyyy.MM.dd","addBehavior":"childOfCurrent"},"scratch":{"name":"scratch","dateFormat":"yyyy.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"todoIntegration":true,"name":"task","dateFormat":"yyyy.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"wip","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.95.1","enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":false,"templateHierarchy":"template","enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"theme":"custom","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/DevLog","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://{GITHUB_USERNAME}.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["DevLog"]},"writeStubs":false,"seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"master","editViewMode":"tree"},"enablePrettyLinks":true,"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"23xvy5h0503jnwb51mhvvjv"},"buildId":"1h5ulSjjsPnt_rJPFXOd4","assetPrefix":"/DevLog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>